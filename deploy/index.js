(function(f){var g;if(typeof window!=='undefined'){g=window}else if(typeof self!=='undefined'){g=self}g.btWebLogin=f()})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.util=exports.init=undefined;var _page=require('./script/manager/page.es6');var _page2=_interopRequireDefault(_page);var _util=require('./script/util.es6');var _util2=_interopRequireDefault(_util);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}function resolveGameNameToConfig(gameName){return{"aoya":{configUrl:"aoya.json"}}[gameName];}function queryGameData(gameName){var c=resolveGameNameToConfig(gameName);return $.get(c.configUrl);}function init(option){var mode=option.mode,gameName=option.gameName;queryGameData(gameName).then(function(data){if(mode=="page"){_page2['default'].init(data,option);}else{throw new Error("mode 不受支持");}});}exports.init=init;exports.util=_util2['default'];// if (!window.btWebLogin_config) {
//     throw new Error("请在引入登陆脚本前先配置相干信息");
// }
// config = {
//     ...config,
//     ...window.btWebLogin_config
// };
// console.log("currentConfig", config);

},{"./script/manager/page.es6":3,"./script/util.es6":4}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]={login:function login(duoduoId,password,autologin){var d=$.Deferred();console.log(duoduoId,password,autologin);d.resolve();return d.promise();},checkGameName:function checkGameName(url,name){return $.getJSON(url+"?callback=?",{name:name});}};

},{}],3:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _tab=require('../views/tab.es6');var _tab2=_interopRequireDefault(_tab);var _login=require('../views/login.es6');var _login2=_interopRequireDefault(_login);var _loginName=require('../views/loginName.es6');var _loginName2=_interopRequireDefault(_loginName);var _qqlogin=require('../views/qqlogin.es6');var _qqlogin2=_interopRequireDefault(_qqlogin);var _quicklogin=require('../views/quicklogin.es6');var _quicklogin2=_interopRequireDefault(_quicklogin);var _register=require('../views/register.es6');var _register2=_interopRequireDefault(_register);var _util=require('../util.es6');var _da=require('../da.es6');var _da2=_interopRequireDefault(_da);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}var root=void 0,ps=$({});var option=void 0;var gameConfig=void 0;var vm={};function goBackLoginSuccess(loginSuccessType){if(option.gameName=="pja"){}else{(0,_util.st)("loginSuccess",loginSuccessType).then(function(){location.href=gameConfig.gameUrl;});}}ps.on("cDispatch",function(e,data){if(data.type=="changeView"){vm.state=data.action;vm.tabIndex=data.index;renderView();}else if(data.type=="loginSuccess"){goBackLoginSuccess(data.loginSuccessType);}});/*入口*/function init(_gameConfig,_option){$("html").addClass("managertype__page");var actionToTabMap={"register":2,"login":1,"loginName":0};gameConfig=_gameConfig;option=_option;$(option.root||"body").append('<table class="type_page_container"><tr><td class="type_page_container__td">\n  <div class="type_page_container__box"></div>\n    </td></tr></table>');root=$(".type_page_container__box");ps.trigger("cDispatch",{action:option.action,type:"changeView",index:actionToTabMap[option.action]});}function renderView(){if(vm.state=="register"){renderRegisterView();}else if(vm.state=="login"){renderLoginView();}else if(vm.state=="loginName"){renderLoginNameView();}else if(vm.state=="quicklogin"){renderQuickLoginView();}else if(vm.state=="loginSuccess"){renderLoginSuccessView();}}function renderTabView(){var menuList=[{name:"游戏名登录",action:"loginName"},{name:"普通登录",action:"login"},{name:"快速注册",action:"register"}];if(option.gameName=="pja"){//百田网不需要游戏名登录
menubar.shift();}return _tab2['default'].render({list:menuList,index:vm.tabIndex});}/*EventBinding*/function bindTab(){root.find(".tabView").on("click",".tabView__item",function(){var _$$data=$(this).data(),action=_$$data.action;ps.trigger("cDispatch",{type:"changeView",action:action,index:$(this).index()});});}function bindQQLoginBtn(){root.find(".qqloginBtn").on("click",function(e){e.preventDefault();var url=$(this).attr("href");var w=open(url,"newwindow","height=600, width=800, top=200, left=300, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no");window.__qqloginSuccess=function(data){w.close();if(data.loginSuccess){ps.trigger("cDispatch",{type:"loginSuccess",loginSuccessType:"qq"});}else{}};return false;});}function doValidate(data,rule){var ruleMap={l_gameName:function l_gameName(data){return new _util.ValidateItem(data,"游戏名").notEmpty();},l_password:function l_password(data){return new _util.ValidateItem(data,"密码").max(16).min(6);},l_duoduoid:function l_duoduoid(data){return new _util.ValidateItem(data,"多多号").isNumber();}};return ruleMap[rule](data);}function bindInputEvent(){$(".fieldItem01__input input",root).on("blur",function(){var v=$(this).val();var _$$data2=$(this).data(),validaterule=_$$data2.validaterule;var rst=doValidate(v,validaterule);if(!rst.status){$(this).closest(".fieldItem01__input").addClass("fieldItem01__input--error");$(this).val(rst.detail);vm.isValid=false;}}).on("focus",function(){vm.isValid=true;if($(this).closest(".fieldItem01__input").hasClass("fieldItem01__input--error")){$(this).val("");}$(this).closest(".fieldItem01__input").removeClass("fieldItem01__input--error");});}function bindRegisterView(){bindTab();bindQQLoginBtn();bindInputEvent();}function bindLoginView(){bindTab();bindQQLoginBtn();bindInputEvent();root.find(".autologinCheckbox").click(function(){$(this).toggleClass("autologinCheckbox--on");var state="false";if($(this).hasClass("autologinCheckbox--on")){state="true";}$(this).siblings("input[name=autologin]").val(state);});var form=root.find("form");form.submit(function(e){$(".fieldItem01__input input").blur();e.preventDefault();if(vm.isValid){var postData={};$.each(form.serializeArray(),function(k,v){postData[v.name]=v.value;});_da2['default'].checkGameName(gameConfig.checkgameNameRequest,postData.gameName).done(function(data){if(data.returnCode!=0){alert(data.returnDetail);}else{_da2['default'].login(data.duoduoId,postData.password,postData.autologin);}});}});}function bindQuickLoginView(){}function bindLoginNameView(){bindTab();bindQQLoginBtn();bindInputEvent();root.find(".autologinCheckbox").click(function(){$(this).toggleClass("autologinCheckbox--on");var state="false";if($(this).hasClass("autologinCheckbox--on")){state="true";}$(this).siblings("input[name=autologin]").val(state);});var form=root.find("form");form.submit(function(e){$(".fieldItem01__input input").blur();e.preventDefault();if(vm.isValid){var postData={};$.each(form.serializeArray(),function(k,v){postData[v.name]=v.value;});_da2['default'].checkGameName(gameConfig.checkgameNameRequest,postData.gameName).done(function(data){if(data.returnCode!=0){alert(data.returnDetail);}else{_da2['default'].login(data.duoduoId,postData.password,postData.autologin);}});}});}/*PanelRender*/function renderRegisterView(){root.html('\n    '+renderTabView()+'\n    '+_register2['default'].render({qqUrl:gameConfig.qqbtnUrl})+'\n  ');bindRegisterView();}function renderLoginView(){root.html('\n    '+renderTabView()+'\n    '+_login2['default'].render({qqUrl:gameConfig.qqbtnUrl,forgetUrl:gameConfig.forgetUrl})+'\n  ');bindLoginView();}function renderLoginNameView(){root.html('\n    '+renderTabView()+'\n    '+_loginName2['default'].render({qqUrl:gameConfig.qqbtnUrl,forgetUrl:gameConfig.forgetUrl})+'\n  ');bindLoginNameView();}function renderQuickLoginView(){root.html('\n    '+renderTabView()+'\n    '+_quicklogin2['default'].render()+'\n  ');bindQuickLoginView();}function renderLoginSuccessView(){}exports['default']={init:init};

},{"../da.es6":2,"../util.es6":4,"../views/login.es6":7,"../views/loginName.es6":8,"../views/qqlogin.es6":9,"../views/quicklogin.es6":11,"../views/register.es6":12,"../views/tab.es6":13}],4:[function(require,module,exports){
"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var isArray=function isArray(arg){return Object.prototype.toString.call(arg)==='[object Array]';};(function(){var RegEx=/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/;function getDomain(str){return str.match(RegEx)[3];}function getParts(str){return str.match(RegEx);}function getSearchQuery(str,key){return getQuerys(str.match(RegEx)[8],key);}function getHashQuery(str,key){return getQuerys(str.match(RegEx)[9]?str.match(RegEx)[9].substring(1):false,key);}function getQuerys(str,key){if(str){var keyReg=new RegExp("(?:^|&)"+key+"(?:[=]?)(.*?)(?=&|$)","i"),commonReg=new RegExp("(?:^|&)(.+?)(?=&|$)","gi"),objects={},j,w;if(key){j=keyReg.exec(str);return j?j[1]:null;}else{while(w=commonReg.exec(str)){var s=w[1].match(/(^[a-zA-Z0-9]+?)=(.*)/);if(s){objects[$.trim(s[1])]=s[2];}else{objects[$.trim(w[1])]="";}}return objects;}}else{return{};}}exports.qs={getDomain:getDomain,getSearchQuery:getSearchQuery,getHashQuery:getHashQuery,getQuerys:getQuerys,getParts:getParts};})();exports.ValidateItem=function ValidateItem(value){var fieldName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";this.data=value;this.status=true;this.fieldName=fieldName;this.detail="";};exports.ValidateItem.prototype=_extends({},exports.ValidateItem.prototype,{notEmpty:function notEmpty(){if(isArray(this.data)&&this.data.length==0){this.status=false;this.detail=this.fieldName+"\u4E0D\u80FD\u4E3A\u7A7A";}else if(!$.trim(this.data)){this.status=false;this.detail=this.fieldName+"\u4E0D\u80FD\u4E3A\u7A7A";}return this;},max:function max(_max){if(this.data.length>_max){this.status=false;this.detail=this.fieldName+"\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC7"+_max;}return this;},min:function min(_min){if(this.data.length<_min){this.status=false;this.detail=this.fieldName+"\u957F\u5EA6\u4E0D\u80FD\u5C11\u4E8E"+_min;}return this;},isNumber:function isNumber(){if(/\D/.test(this.data)){this.status=false;this.detail=this.fieldName+"\u4E0D\u80FD\u8F93\u5165\u975E\u6570\u5B57";}return this;},isUrl:function isUrl(domain){var urlReg=new RegExp("^http(s)?://"+(domain?domain.replace(/[./()\[\]]/g,'\\$&'):''),"im");if(!urlReg.test(this.data)){this.status=false;this.detail=this.fieldName+"\u8BF7\u8F93\u5165"+(domain?domain+"\u57DF\u540D\u4E0B\u7684":'')+"\u6B63\u786Eurl";}return this;}});exports.st=function st(stType,type){//
console.log("send Stastic:",stType,type);return $.Deferred().resolve();//   统计需求
//  普通登录页面访问用户数（初始化调用）1
//  普通登录页面成功登录用户数（登录时候调用）2
//  游戏名登录页面访问用户数（初始化时调用）3
//  游戏名登录页面成功登录用户数（登录时调用）4
//  快速注册页面访问用户数（初始化调用）5
//  快速注册页面成功注册用户数（注册时调用）6
//  快速登录页面的访问用户数（初始化调用）7
//  经过快速登录页面成功登录的用户数（登陆时候调用）8
};

},{}],5:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports['default']={render:function render(_ref){var cname=_ref.cname,name=_ref.name,tips=_ref.tips,rule=_ref.rule,type=_ref.type;return'\n          <div class="fieldItem01 formlo01">\n            <div class="fieldItem01__label formlo01__l">'+cname+'</div>\n            <div class="fieldItem01__input formlo01__r '+(type?'fieldItem01__input--'+type:'fieldItem01__input--long')+'"><input type="text" name="'+name+'" id="" placeholder="'+tips+'" data-validaterule="'+rule+'"/></div>\n          </div>\n        ';}};

},{}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]={render:function render(_ref){var url=_ref.url;return"<a href=\""+url+"\" target=\"_blank\">\u5FD8\u8BB0\u5BC6\u7801</a>";}};

},{}],7:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _qqloginbtn=require('./qqloginbtn.es6');var _qqloginbtn2=_interopRequireDefault(_qqloginbtn);var _fieldItem=require('./fieldItem01.es');var _fieldItem2=_interopRequireDefault(_fieldItem);var _forgetlink=require('./forgetlink.es');var _forgetlink2=_interopRequireDefault(_forgetlink);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}// cname,name,tips,rule,type
exports['default']={render:function render(_ref){var qqUrl=_ref.qqUrl,forgetUrl=_ref.forgetUrl;return'\n        '+_qqloginbtn2['default'].render({url:qqUrl})+'\n        <form id="loginForm">\n        '+_fieldItem2['default'].render({cname:"多多号:",name:"gameName",tips:"请输入多多号",rule:"l_duoduoid"})+'\n        '+_fieldItem2['default'].render({cname:"密码:",name:"password",tips:"请输入密码",rule:"l_password"})+'\n        <div class="formlo01">\n          <div class="formlo01__l"></div><div class="formlo01__r">\n            <input type="hidden" name="autologin" />\n            <span class="autologinCheckbox">\n            <span class="autologinCheckbox__i">a</span><span class="autologinCheckbox__word">\u81EA\u52A8\u767B\u5F55</span>\n            </span>\n            '+_forgetlink2['default'].render({url:forgetUrl})+'\n          </div>\n        </div>\n        <div class="formlo01">\n          <div class="formlo01__l"></div><div class="formlo01__r">\n            <input type="submit" value="\u767B\u9646\u6309\u94AE" class="loginBtn" />\n          </div>\n        </div>\n        </form>\n        ';}};

},{"./fieldItem01.es":5,"./forgetlink.es":6,"./qqloginbtn.es6":10}],8:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _qqloginbtn=require('./qqloginbtn.es6');var _qqloginbtn2=_interopRequireDefault(_qqloginbtn);var _fieldItem=require('./fieldItem01.es');var _fieldItem2=_interopRequireDefault(_fieldItem);var _forgetlink=require('./forgetlink.es');var _forgetlink2=_interopRequireDefault(_forgetlink);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}// cname,name,tips,rule,type
exports['default']={render:function render(_ref){var qqUrl=_ref.qqUrl,forgetUrl=_ref.forgetUrl;return'\n        '+_qqloginbtn2['default'].render({url:qqUrl})+'\n        <form id="loginNameForm">\n        '+_fieldItem2['default'].render({cname:"游戏名:",name:"gameName",tips:"请输入游戏名",rule:"l_gameName"})+'\n        '+_fieldItem2['default'].render({cname:"密码:",name:"password",tips:"请输入密码",rule:"l_password"})+'\n        <div class="formlo01">\n          <div class="formlo01__l"></div><div class="formlo01__r">\n            <input type="hidden" name="autologin" />\n            <span class="autologinCheckbox">\n            <span class="autologinCheckbox__i">a</span><span class="autologinCheckbox__word">\u81EA\u52A8\u767B\u5F55</span>\n            </span>\n            '+_forgetlink2['default'].render({url:forgetUrl})+'\n          </div>\n        </div>\n        <div class="formlo01">\n          <div class="formlo01__l"></div><div class="formlo01__r">\n            <input type="submit" value="\u767B\u9646\u6309\u94AE" class="loginBtn" />\n          </div>\n        </div>\n        </form>\n        ';}};

},{"./fieldItem01.es":5,"./forgetlink.es":6,"./qqloginbtn.es6":10}],9:[function(require,module,exports){
"use strict";

},{}],10:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]={render:function render(_ref){var url=_ref.url;return"\n          <div class=\"qqloginRow\">\u65E0\u9700\u6CE8\u518C\u7B2C\u4E09\u65B9\u767B\u9646:<a href=\""+url+"\" class=\"qqloginBtn\">qq\u767B\u9646</a></div>\n        ";}};

},{}],11:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]={render:function render(){return"\n        quickLogin\n        ";}};

},{}],12:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _qqloginbtn=require('./qqloginbtn.es6');var _qqloginbtn2=_interopRequireDefault(_qqloginbtn);var _fieldItem=require('./fieldItem01.es');var _fieldItem2=_interopRequireDefault(_fieldItem);var _forgetlink=require('./forgetlink.es');var _forgetlink2=_interopRequireDefault(_forgetlink);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}// cname,name,tips,rule,type
exports['default']={render:function render(_ref){var qqUrl=_ref.qqUrl,forgetUrl=_ref.forgetUrl;return'\n        '+_qqloginbtn2['default'].render({url:qqUrl})+'\n        <form id="registerForm">\n        '+_fieldItem2['default'].render({cname:"密码:",name:"gameName",tips:"请输入6-16位的密码",rule:"r_gameName"})+'\n        '+_fieldItem2['default'].render({cname:"重复密码:",name:"password",tips:"请再次输入你的密码",rule:"r_password"})+'\n        '+_fieldItem2['default'].render({cname:"验证码:",name:"code",tips:"右边的数字",rule:"r_password"})+'\n        <div class="formlo01">\n          <div class="formlo01__l"></div><div class="formlo01__r">\n            <input type="hidden" name="autologin" />\n            <span class="autologinCheckbox">\n            <span class="autologinCheckbox__i">a</span><span class="autologinCheckbox__word">\u81EA\u52A8\u767B\u5F55</span>\n            </span>\n            '+_forgetlink2['default'].render({url:forgetUrl})+'\n          </div>\n        </div>\n        <div class="formlo01">\n          <div class="formlo01__l"></div><div class="formlo01__r">\n            <input type="submit" value="\u767B\u9646\u6309\u94AE" class="loginBtn" />\n          </div>\n        </div>\n        </form>\n        ';}};

},{"./fieldItem01.es":5,"./forgetlink.es":6,"./qqloginbtn.es6":10}],13:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports['default']={render:function render(_ref){var list=_ref.list,_ref$index=_ref.index,index=_ref$index===undefined?0:_ref$index;return'\n          <div class="tabView">\n          '+$.map(list,function(v,k){return'\n              <div class="tabView__item '+(k==index?'tabView__item--on':'')+'" data-action="'+v.action+'">'+v.name+'</div>\n            ';}).join("")+'\n          </div>\n        ';}};

},{}]},{},[1])(1)
});